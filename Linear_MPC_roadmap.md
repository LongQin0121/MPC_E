# 线性模型预测控制(Linear MPC)学习路线图

## 第一阶段：基础概念理解 (2-3课时)

### 1.1 MPC核心思想
- **什么是MPC？** 预测-优化-执行的控制策略
- **为什么需要MPC？** 处理约束、多变量、预测未来
- **MPC vs 传统控制** PID、LQR等的对比
- **基本术语** 预测窗口、控制窗口、滚动优化

### 1.2 MPC工作原理
- **预测模型** 如何预测系统未来状态
- **目标函数** 性能指标的数学表达
- **约束条件** 输入、输出、状态约束
- **滚动优化** 为什么每一步都重新求解

## 第二阶段：数学基础 (3-4课时)

### 2.1 线性系统建模
- **状态空间表示** x(k+1) = Ax(k) + Bu(k)
- **离散化方法** 从连续系统到离散系统
- **系统矩阵** A, B, C, D的物理意义
- **实例建模** 简单机械系统、电路系统

### 2.2 预测模型构建
- **多步预测** 展开状态方程
- **矩阵形式** 紧凑的预测表示
- **增广模型** 处理积分作用和外扰
- **数学推导** 完整的数学过程

### 2.3 优化理论基础
- **二次规划(QP)** 线性MPC的核心
- **KKT条件** 约束优化的理论基础
- **对偶理论** 理解QP求解器工作原理

## 第三阶段：MPC问题建立 (3-4课时)

### 3.1 目标函数设计
- **跟踪问题** 状态/输出跟踪
- **权重矩阵** Q, R, P的选择原则
- **终端约束** 保证稳定性
- **经济MPC** 直接优化经济目标

### 3.2 约束条件
- **输入约束** u_min ≤ u ≤ u_max
- **状态约束** x_min ≤ x ≤ x_max
- **输出约束** y_min ≤ y ≤ y_max
- **混合约束** 复杂约束的处理

### 3.3 稳定性分析
- **终端成分** 终端代价和约束集
- **不变集** 为什么需要终端约束
- **稳定性证明** 李雅普诺夫方法

## 第四阶段：Python实现 (4-5课时)

### 4.1 基础工具和库
- **必需库** numpy, scipy, cvxpy, matplotlib
- **环境搭建** Python环境配置
- **基础测试** 简单的QP求解

### 4.2 MPC类设计
- **系统类** LinearSystem class
- **MPC控制器类** LinearMPC class  
- **仿真类** Simulator class
- **可视化工具** 结果展示

### 4.3 核心算法实现
- **预测矩阵生成** 自动构建预测模型
- **QP问题构建** 目标函数和约束矩阵
- **求解器调用** 使用CVXPY求解
- **滚动实现** 闭环仿真

## 第五阶段：实际应用 (3-4课时)

### 5.1 经典例子
- **双积分器系统** 最简单的MPC例子
- **质量-弹簧-阻尼** 机械系统控制
- **倒立摆** 不稳定系统稳定化
- **四旋翼** 多变量系统

### 5.2 高级主题
- **软约束** 违反约束的处理
- **鲁棒MPC** 处理不确定性
- **自适应MPC** 在线参数辨识
- **分布式MPC** 大规模系统

### 5.3 工程实践
- **实时实现** 计算时间优化
- **参数调优** 系统化的调参方法
- **故障处理** 不可行解的处理
- **工业应用案例** 实际项目分析

## 学习目标检查清单

**理论理解 ✓**
- [ ] 能解释MPC的基本工作原理
- [ ] 理解预测模型的数学构建过程  
- [ ] 掌握QP问题的标准形式
- [ ] 了解稳定性的理论保证

**实现能力 ✓**
- [ ] 能独立搭建线性MPC求解器
- [ ] 会调用专业优化库求解QP
- [ ] 能进行闭环仿真和结果分析
- [ ] 会处理各种类型的约束条件

**应用技能 ✓** 
- [ ] 能将实际系统建模为状态空间形式
- [ ] 会根据控制要求设计权重矩阵
- [ ] 能分析和调优MPC参数
- [ ] 掌握常见问题的调试方法

## 推荐学习节奏

- **每周2-3课时**，总计15-20课时完成
- **理论与实践并重**，每个概念都配合代码实现
- **循序渐进**，确保前一阶段掌握后再进行下一阶段
- **多做练习**，通过不同例子加深理解

---

**准备好开始了吗？我们从第一阶段的MPC核心思想开始！**
